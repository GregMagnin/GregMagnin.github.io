const b="https://quizapi.io/api/v1/questions?limit=1",E="DQpKZpKbBUwznZ1LFFLPk8FMQBiLhFtr1OdMsHMs",w=document.querySelector(".loader"),h=async()=>{let T={method:"GET",headers:{"X-Api-Key":E},mode:"cors",cache:"default"},p=document.getElementById("iteration_question"),y=document.getElementById("question"),u=document.getElementById("answers"),i=document.getElementById("remaining_questions"),m=parseInt(localStorage.getItem("questions")),n=parseInt(localStorage.getItem("iteration_question")),d=parseInt(localStorage.getItem("number_good_answers")),S=document.getElementById("timer"),s=m-n,q="",I="";w.style.display="flex";let g=Math.floor(Math.random()*27);if(localStorage.getItem("categorie")!==null&&(q=`&category=${localStorage.getItem("categorie")}`),localStorage.getItem("level")!==null&&(I=`&difficulty=${localStorage.getItem("level")}`),localStorage.getItem("level")==="Legend"){async function f(){return await(await fetch("/api/api.json")).json()}let r=await f();if(w.style.display="none",async function(){let e=30;setInterval(()=>{e=e<10?"0"+e:e,S.innerHTML=e,e=e<=0?0:e-1,e===0&&(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(document.location.reload(!0),2e3))},1e3)}(),r[g].multiple_correct_answers==="false"){let l=r[g].answers;p.innerText=localStorage.getItem("iteration_question"),y.innerText=r[g].question,s>1?i.innerText=`${s.toString()} questions left !`:s===1?i.innerText=`${s.toString()} question left !`:i.innerText="Last question !";for(let e of Object.entries(l))if(e[1]!==null){let t=document.createElement("span");t.classList.add("answer"),t.setAttribute("id",e[0]),t.innerText=e[1].toString(),u.appendChild(t)}u.addEventListener("click",async e=>{let t=r[g].correct_answers,a="";for(let o in t)t[o]==="true"&&(a=o.split("_")[0]+"_"+o.split("_")[1]);let c=document.getElementById(a),_=document.querySelectorAll(".answer");for(let o of _)o.style.backgroundColor="rgb(255,39,39)";c.style.backgroundColor="rgb(0, 201, 68)",c===e.target&&(d++,localStorage.setItem("number_good_answers",d.toString())),m>n?(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(()=>{document.location.reload()},1e3)):setTimeout(()=>{document.location.href="#result"},1e3)})}else document.location.reload()}else{async function f(){return await(await fetch(b+q+I,T)).json()}let r=await f();if(w.style.display="none",async function(){let e=30;setInterval(()=>{e=e<10?`0${e}`:e,S.innerHTML=e,e=e<=0?0:e-1,e===0&&(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(document.location.reload(!0),2e3))},1e3)}(),r[0].multiple_correct_answers==="false"){let l=r[0].answers;p.innerText=localStorage.getItem("iteration_question"),y.innerText=r[0].question,s>1?i.innerText=`${s.toString()} questions left !`:s===1?i.innerText=`${s.toString()} question left !`:i.innerText="Last question !";for(let e of Object.entries(l))if(e[1]!==null){let t=document.createElement("span");t.classList.add("answer"),t.setAttribute("id",e[0]),t.innerText=e[1].toString(),u.appendChild(t)}u.addEventListener("click",async e=>{let t=r[0].correct_answers,a="";for(let o in t)t[o]==="true"&&(a=`${o.split("_")[0]}_${o.split("_")[1]}`);let c=document.getElementById(a),_=document.querySelectorAll(".answer");for(let o of _)o.style.backgroundColor="rgb(255,39,39)";c.style.backgroundColor="rgb(0, 201, 68)",c===e.target&&(d++,localStorage.setItem("number_good_answers",d.toString())),m>n?(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(()=>{document.location.reload()},1e3)):setTimeout(()=>{document.location.href="#result"},1e3)})}else document.location.reload()}};export{h as default};
