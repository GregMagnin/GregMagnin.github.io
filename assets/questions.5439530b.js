const x="https://quizapi.io/api/v1/questions?limit=1",h="DQpKZpKbBUwznZ1LFFLPk8FMQBiLhFtr1OdMsHMs",w=document.querySelector(".loader"),A=async()=>{let b={method:"GET",headers:{"X-Api-Key":h},mode:"cors",cache:"default"},p=document.getElementById("iteration_question"),I=document.getElementById("question"),g=document.getElementById("answers"),c=document.getElementById("remaining_questions"),f=parseInt(localStorage.getItem("questions")),n=parseInt(localStorage.getItem("iteration_question")),m=parseInt(localStorage.getItem("number_good_answers")),S=document.getElementById("timer"),l=f-n,y="",q="";if(w.style.display="flex",localStorage.getItem("categorie")!==null&&(y=`&category=${localStorage.getItem("categorie")}`),localStorage.getItem("level")!==null&&(q=`&difficulty=${localStorage.getItem("level")}`),localStorage.getItem("level")==="Legend"){let r=function(){for(;;)if(e=Math.floor(Math.random()*o.length),!a.includes(e))return a.push(e),localStorage.setItem("usedIndices",JSON.stringify(a)),e};async function _(){return await(await fetch("../../api/api.json")).json()}let o=await _(),a=JSON.parse(localStorage.getItem("usedIndices"))||[],e;if(e=r(),w.style.display="none",async function(){let t=30;setInterval(()=>{t=t<10?"0"+t:t,S.innerHTML=t,t=t<=0?0:t-1,t===0&&(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(document.location.reload(!0),2e3))},1e3)}(),o[e].multiple_correct_answers==="false"){let u=o[e].answers;p.innerText=localStorage.getItem("iteration_question"),I.innerText=o[e].question,l>1?c.innerText=`${l.toString()} questions left !`:l===1?c.innerText=`${l.toString()} question left !`:c.innerText="Last question !";for(let t of Object.entries(u))if(t[1]!==null){let s=document.createElement("span");s.classList.add("answer"),s.setAttribute("id",t[0]),s.innerText=t[1].toString(),g.appendChild(s)}g.addEventListener("click",async t=>{let s=o[e].correct_answers,i="";for(let d in s)s[d]==="true"&&(i=d.split("_")[0]+"_"+d.split("_")[1]);let T=document.getElementById(i),E=document.querySelectorAll(".answer");for(let d of E)d.style.backgroundColor="rgb(255,39,39)";T.style.backgroundColor="rgb(0, 201, 68)",T===t.target&&(m++,localStorage.setItem("number_good_answers",m.toString())),f>n?(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(()=>{document.location.reload()},1e3)):setTimeout(()=>{document.location.href="#result"},1e3)})}else document.location.reload()}else{async function _(){return await(await fetch(x+y+q,b)).json()}let o=await _();if(w.style.display="none",async function(){let e=30;setInterval(()=>{e=e<10?`0${e}`:e,S.innerHTML=e,e=e<=0?0:e-1,e===0&&(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(document.location.reload(!0),2e3))},1e3)}(),o[0].multiple_correct_answers==="false"){let a=o[0].answers;p.innerText=localStorage.getItem("iteration_question"),I.innerText=o[0].question,l>1?c.innerText=`${l.toString()} questions left !`:l===1?c.innerText=`${l.toString()} question left !`:c.innerText="Last question !";for(let e of Object.entries(a))if(e[1]!==null){let r=document.createElement("span");r.classList.add("answer"),r.setAttribute("id",e[0]),r.innerText=e[1].toString(),g.appendChild(r)}g.addEventListener("click",async e=>{let r=o[0].correct_answers,u="";for(let i in r)r[i]==="true"&&(u=`${i.split("_")[0]}_${i.split("_")[1]}`);let t=document.getElementById(u),s=document.querySelectorAll(".answer");for(let i of s)i.style.backgroundColor="rgb(255,39,39)";t.style.backgroundColor="rgb(0, 201, 68)",t===e.target&&(m++,localStorage.setItem("number_good_answers",m.toString())),f>n?(n++,localStorage.setItem("iteration_question",n.toString()),setTimeout(()=>{document.location.reload()},1e3)):setTimeout(()=>{document.location.href="#result"},1e3)})}else document.location.reload()}};export{A as default};
